<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
    
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>    
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<input type="text" name= "search_str" id="search_str">
<input type="button" name= "searchBtn" value="검색"><br>


<c:forEach items="${KEY_BOARDLIST}" var="bvo">
	${bvo.seq} , 
	<a href="${pageContext.request.contextPath}/board_detail?seq=${bvo.seq}">${bvo.title}</a>, 
	${bvo.regdate} <br> 
</c:forEach>
<p><br>
<a href="${pageContext.request.contextPath}/lec05_board/board_insert.jsp">글쓰기</a>
<script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script>
		$(function() {
			function makeTable() {
				
				//화면 준비되면 댓글목록 바로 가져오기 :::  REST
				$.ajax({
					method      : "POST",
			        url         : "${pageContext.request.contextPath}/reply_list_rest",
			        contentType : "application/x-www-form-urlencoded; charset=UTF-8",
			        data 		: "seq=${KEY_BOARDVO.seq}",   
			  		error 	    : function(myval){ console.log("에러:" + myval);   },
			  		success     : function(myval){ 
			  										console.log("성공:" + myval);  //ResponseEntity<>(rlist, HttpStatus.OK)   
			  										
			  										var htmlStr = "<table border=1 width=50%>";
			  										$.map( myval, function( MYval, MYidx ) {
			  											htmlStr += "<tr><td><font color='red'><input type='button' id='replyDeleteBtn' value='[X]' data-rseq='" + MYval.rseq + "' data-seq='" + MYval.seq + "'></font>" + MYval.reply + "</td></tr>";

			  											//console.log(MYval["title"] + "," + MYval["regid"] + "," + MYidx);
			  										});
			  										htmlStr += "</table>";
			  										$("#replyListDiv").empty();
			  										$("#replyListDiv").html(htmlStr);
			  										
			  									}
				});
			}
		});
	</script>


</body>
</html>